# 帳簿アプリ 要件メモ

## 1. アプリの目的

・誰でも直感的に使える帳簿アプリ
・シンプルで使いやすいUI
・多数のシーンに対応できる一覧表示
・必要に応じてファイル化できるCSV保存機能
・編集ページは用意せず、一覧から直接変更可能な仕様にする

## 2. MVPコアの範囲

・新規登録（日付・区分・勘定項目・摘要・金額）
    -> 必須チェック：金額を整数に変換できるか確認
・総収入の表示
・総支出の表示
・差額の表示
・全件の一覧表示（削除ボタンもつける）


## 3. 画面一覧

・新規作成
・一覧表示（詳細）
・一覧表示（月別）
・一覧表示（日別）
・年間合計

## 4. URL設計（案）

GET  /                 -> ダッシュボード（年間集計）
GET  /entries          -> 一覧（詳細）画面
                         ?year=2025&month=3 などのクエリで絞り込み
GET  /entries/new      -> 新規登録フォーム
POST /entries          -> 新規登録処理

## 5. DB設計（MVP版 / ChatGPTの出力）

### 5-1. テーブル一覧

- `entries` : 収入・支出の取引を 1 行ずつ記録するテーブル（MVPではこの1つだけ）

### 5-2. entries テーブル

| カラム名 | 型 (SQLite) | 例 | 説明 |
|--------|------------|----|------|
| id | INTEGER PRIMARY KEY | 1, 2, 3… | 自動採番の通し番号。更新・削除でこのIDを指定する |
| date | TEXT (YYYY-MM-DD) | "2025-03-10" | 取引日。日付での絞り込みや集計に使う |
| type | TEXT | "income" / "expense" | 収入か支出かの区分。集計で条件分岐するときに使う |
| account | TEXT | "売上", "地代家賃" など | 勘定科目名をそのまま文字列で保存する |
| summary | TEXT | "バナー広告制作" | 摘要（取引内容のメモ） |
| amount | INTEGER | 45000 | 金額。円単位の整数で保存する |

### 5-3. 設計の方針メモ

- MVPではDB設計をシンプルにするため、テーブルは `entries` の1つに絞る。
- 勘定科目マスタなどは作らず、`account` カラムに文字列として保存する。
- 日付は SQLite の DATE 型ではなく、TEXTで "YYYY-MM-DD" 形式で保存する。
  - 将来、`strftime('%Y', date)` や `strftime('%m', date)` を使って、年間集計や月別一覧を実装しやすくするため。
- 金額は整数（INTEGER）で保存し、SUMや差額計算のときに誤差が出ないようにする。

## 6. 今後の拡張アイデア